<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mobimate | VV Anthem</title>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    body { background: #222; min-height: 100vh; display: flex; justify-content: center; align-items: center; margin: 0; position: relative; overflow: hidden; }
    .visualizer-bg { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); z-index: 0; pointer-events: none; }
    .ipod-player { width: 340px; height: 540px; background: #f8f8f8; border-radius: 40px; box-shadow: 0 8px 32px #0008; display: flex; flex-direction: column; align-items: center; position: relative; overflow: hidden; border: 2px solid #e0e0e0; z-index: 1; }
    .ipod-screen { width: 90%; height: 58%; background: #222; border-radius: 24px; margin-top: 24px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; overflow: hidden; box-shadow: 0 2px 12px #185a9d44; position: relative; }
    .cover-art { width: 100%; height: 100%; object-fit: cover; border-radius: 24px; position: absolute; top: 0; left: 0; z-index: 1; }
    .mini-counter { position: absolute; bottom: 16px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.45); font-family: 'Orbitron', monospace; font-size: 0.6rem; padding: 0; border-radius: 12px; z-index: 2; letter-spacing: 1px; box-shadow: none; border: none; background: none; text-shadow: 0 2px 8px #0008; pointer-events: none; user-select: none; white-space: nowrap; }
    .ipod-wheel { width: 170px; height: 170px; background: #eee; border-radius: 50%; margin-top: 32px; margin-bottom: 32px; box-shadow: 0 2px 12px #185a9d44; display: flex; align-items: center; justify-content: center; position: relative; border: 2px solid #e0e0e0; }
    .wheel-title { position: absolute; top: 28px; left: 50%; transform: translateX(-50%); font-family: 'Oswald', Arial, sans-serif; font-size: 18px; color: #fff; letter-spacing: 2px; font-weight: 700; z-index: 2; pointer-events: none; text-align: center; width: 140px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-transform: uppercase; opacity: 1; line-height: 1; background: none; padding: 0 4px; }
    .wheel-btn { position: absolute; width: 36px; height: 36px; background: none; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 2; transition: background 0.2s; box-shadow: none; }
    .wheel-btn:active { background: #e0e0e0; }
    .btn-rewind { left: 10px; top: 50%; transform: translateY(-50%); }
    .btn-play { bottom: 10px; left: 50%; transform: translateX(-50%); }
    .btn-forward { right: 10px; top: 50%; transform: translateY(-50%); }
    .wheel-btn svg { width: 22px; height: 22px; fill: #888; }
    .wheel-center { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 50px; height: 50px; background: #eee; border-radius: 50%; box-shadow: 0 2px 8px #185a9d22; display: flex; align-items: center; justify-content: center; z-index: 3; border: 2px solid #e0e0e0; pointer-events: none; }
    .wheel-center svg { width: 22px; height: 22px; fill: #eee; }
    @media (max-width: 400px) { .ipod-player { width: 98vw; height: 70vw; min-width: 220px; min-height: 350px;} .ipod-screen { width: 96%; } .ipod-wheel { width: 40vw; height: 40vw; min-width: 90px; min-height: 90px;} .wheel-title { width: 80px; font-size: 10px;} }
  </style>
</head>
<body>
  <canvas class="visualizer-bg" id="visualizer-bg" width="320" height="120"></canvas>
  <div class="ipod-player">
    <div class="ipod-screen">
      <img class="cover-art" src="vv-anthems/mobimate-cover.jpg" alt="Cover Art">
      <div class="mini-counter" id="counter">00:00 | 00:00</div>
    </div>
    <div class="ipod-wheel">
      <div class="wheel-title" id="wheelTitle">MOBIMATE</div>
      <button class="wheel-btn btn-rewind" id="rewindBtn" title="Rewind 10s">
        <svg viewBox="0 0 60 60"><polygon points="35,10 10,30 35,50"/><polygon points="50,10 25,30 50,50"/></svg>
      </button>
      <button class="wheel-btn btn-play" id="playPauseBtn" title="Play/Pause">
        <svg id="playIcon" viewBox="0 0 60 60"><polygon points="15,10 50,30 15,50"/></svg>
        <svg id="pauseIcon" viewBox="0 0 60 60" style="display:none;"><rect x="15" y="10" width="10" height="40"/><rect x="35" y="10" width="10" height="40"/></svg>
      </button>
      <button class="wheel-btn btn-forward" id="forwardBtn" title="Forward 10s">
        <svg viewBox="0 0 60 60"><polygon points="10,10 35,30 10,50"/><polygon points="25,10 50,30 25,50"/></svg>
      </button>
      <div class="wheel-center">
        <svg viewBox="0 0 60 60"><circle cx="30" cy="30" r="22" stroke="#eee" stroke-width="4" fill="none"/></svg>
      </div>
    </div>
    <audio id="audio" src="vv-anthems/Mobimate Song.mp3"></audio>
  </div>
  <script>
    // Audio controls
    const audio = document.getElementById('audio');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    const rewindBtn = document.getElementById('rewindBtn');
    const forwardBtn = document.getElementById('forwardBtn');
    const counter = document.getElementById('counter');
    const wheelTitle = document.getElementById('wheelTitle');

    function formatTime(sec) {
      if (isNaN(sec)) return '00:00';
      const m = Math.floor(sec / 60);
      const s = Math.floor(sec % 60);
      return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }

    playPauseBtn.addEventListener('click', () => {
      if (audio.paused) {
        audio.play();
        playIcon.style.display = 'none';
        pauseIcon.style.display = 'block';
      } else {
        audio.pause();
        playIcon.style.display = 'block';
        pauseIcon.style.display = 'none';
      }
    });

    audio.addEventListener('timeupdate', () => {
      counter.textContent = `${formatTime(audio.currentTime)} | ${formatTime(audio.duration)}`;
    });

    audio.addEventListener('loadedmetadata', () => {
      counter.textContent = `${formatTime(audio.currentTime)} | ${formatTime(audio.duration)}`;
    });

    audio.addEventListener('ended', () => {
      playIcon.style.display = 'block';
      pauseIcon.style.display = 'none';
    });

    rewindBtn.addEventListener('click', () => {
      audio.currentTime = Math.max(0, audio.currentTime - 10);
    });

    forwardBtn.addEventListener('click', () => {
      audio.currentTime = Math.min(audio.duration, audio.currentTime + 10);
    });

    // Dynamically fit the song title in Oswald, all caps, and scale font size to fit
    function fitTitleFont() {
      const maxWidth = 140; // px
      let fontSize = 18; // px, start large
      wheelTitle.style.fontSize = fontSize + 'px';
      while (wheelTitle.scrollWidth > maxWidth && fontSize > 8) {
        fontSize -= 1;
        wheelTitle.style.fontSize = fontSize + 'px';
      }
    }
    wheelTitle.textContent = 'MOBIMATE';
    fitTitleFont();

    // --- FAKE DYNAMIC VISUALIZER ---
    const canvas = document.getElementById('visualizer-bg');
    const ctx = canvas.getContext('2d');
    const numBars = 64;
    const barWidth = 1;
    const barSpacing = 4;
    const totalBarsWidth = numBars * barWidth + (numBars - 1) * barSpacing;
    const startX = (canvas.width - totalBarsWidth) / 2;
    let animationId;

    // Simple hash for song title to seed the animation
    function hashString(str) {
      let hash = 0;
      for (let i = 0; i < str.length; i++) {
        hash = ((hash << 5) - hash) + str.charCodeAt(i);
        hash |= 0;
      }
      return Math.abs(hash % 10000) / 10000;
    }
    const songSeed = hashString('Mobimate');

    function hsvToRgb(h, s, v) {
      let r, g, b;
      let i = Math.floor(h * 6);
      let f = h * 6 - i;
      let p = v * (1 - s);
      let q = v * (1 - f * s);
      let t = v * (1 - (1 - f) * s);
      switch (i % 6) {
        case 0: r = v, g = t, b = p; break;
        case 1: r = q, g = v, b = p; break;
        case 2: r = p, g = v, b = t; break;
        case 3: r = p, g = q, b = v; break;
        case 4: r = t, g = p, b = v; break;
        case 5: r = v, g = p, b = q; break;
      }
      return [Math.round(r*255), Math.round(g*255), Math.round(b*255)];
    }

    function drawVisualizer() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      let t = performance.now() * 0.0005 + songSeed * 10;
      for (let i = 0; i < numBars; i++) {
        // Unique pattern per song using songSeed
        let h = (Math.sin(t*2 + i*0.3 + songSeed*20) + Math.sin(t*3 + i*0.7 + songSeed*50)) * 0.5;
        h = (h + 1) / 2; // Normalize to 0..1
        h = h * canvas.height * 0.9;
        let hue = ((i / numBars) + t) % 1.0;
        let rgb = hsvToRgb(hue, 1, 1);
        let x = Math.floor(startX + i * (barWidth + barSpacing));
        // Glow
        for (let glow = 6; glow > 0; glow -= 2) {
          ctx.save();
          ctx.globalAlpha = 0.08;
          ctx.strokeStyle = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;
          ctx.lineWidth = 1 + glow*2;
          ctx.beginPath();
          ctx.moveTo(x+0.5, canvas.height-h-glow);
          ctx.lineTo(x+0.5, canvas.height+glow);
          ctx.stroke();
          ctx.restore();
        }
        // Main bar
        ctx.save();
        ctx.globalAlpha = 0.9;
        ctx.strokeStyle = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;
        ctx.lineWidth = barWidth;
        ctx.beginPath();
        ctx.moveTo(x+0.5, canvas.height-h);
        ctx.lineTo(x+0.5, canvas.height);
        ctx.stroke();
        ctx.restore();
      }
      animationId = requestAnimationFrame(drawVisualizer);
    }

    audio.addEventListener('play', () => {
      drawVisualizer();
    });
    audio.addEventListener('pause', () => {
      cancelAnimationFrame(animationId);
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });
    audio.addEventListener('ended', () => {
      cancelAnimationFrame(animationId);
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });
  </script>
</body>
</html>
